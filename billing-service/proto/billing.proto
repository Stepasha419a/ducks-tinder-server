syntax="proto3";

import "google/protobuf/timestamp.proto";

package billing;
option go_package = "./gen";

service BillingService {
    rpc WithdrawUserCreditCard (WithdrawUserCreditCardRequest) returns (Purchase);
    rpc GetUserCreditCard (GetUserCreditCardRequest) returns (CreditCard);
}

message WithdrawUserCreditCardRequest {
    string userId = 1;
    string creditCardId = 2;
    uint32 amount = 3;
}

message Purchase {
    string id = 1;
    string creditCardId = 2;
    uint32 amount = 3;
    google.protobuf.Timestamp createdAt = 4;
}

message GetUserCreditCardRequest {
    string userId = 1;
}

message CreditCard {
    string id = 1;
    string userId = 2;
    string pan = 3;
    string holder = 4;
    string cvc = 5;

    google.protobuf.Timestamp expiresAt = 6;
    google.protobuf.Timestamp createdAt = 7;
    google.protobuf.Timestamp updatedAt = 8;
}